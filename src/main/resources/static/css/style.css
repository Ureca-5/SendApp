/* =========================================
   1. Variables & Reset
   ========================================= */
:root {
  /* LG U+ Color Palette */
  --bg: #f4f6f8;           /* 전체 배경 (아주 연한 회색) */
  --panel: #ffffff;        /* 패널/카드 배경 (흰색) */
  --panel-secondary: #f8f9fa; /* 보조 배경 */

  --text-main: #222222;    /* 메인 텍스트 */
  --text-muted: #666666;   /* 보조 텍스트 */

  --border: #e0e0e0;       /* 테두리 색상 */

  /* Brand Colors */
  --accent: #e6007e;       /* U+ Magenta */
  --accent-hover: #c5006b; /* 호버 시 색상 */
  --accent-soft: rgba(230, 0, 126, 0.08); /* 연한 배경용 */

  /* Status Colors */
  --success: #2e7d32;
  --success-bg: #e8f5e9;
  --danger: #d32f2f;
  --danger-bg: #ffebee;

  /* Spacing & Sizing */
  --shadow: 0 1px 3px rgba(0,0,0,0.05);
  --radius: 8px;
  --header-height: 60px;
  --sidebar-width: 240px;

  --font: 'Malgun Gothic', 'Dotum', -apple-system, sans-serif;
}

* { box-sizing: border-box; }

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text-main);
  font-size: 14px;
  line-height: 1.5;
}

a { text-decoration: none; color: inherit; transition: color 0.2s; }
ul, li { list-style: none; padding: 0; margin: 0; }

/* =========================================
   2. Layout Structure (핵심: 고정 사이드바 & 푸터)
   ========================================= */
.app {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;
  min-height: 100vh;
}

/* Sidebar: 화면 왼쪽에 고정 (Sticky) */
.sidebar {
  background: #ffffff;
  border-right: 1px solid var(--border);
  position: sticky;
  top: 0;
  height: 100vh; /* 화면 전체 높이 사용 */
  overflow-y: auto; /* 내용 넘치면 내부 스크롤 */
  z-index: 100;

  display: flex;
  flex-direction: column;
  padding: 20px;
  gap: 20px;
}

/* Main Area: Flex로 내용과 푸터 분리 */
.main {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  min-width: 0; /* Grid overflow 방지 */
}

/* Content: 남은 공간 꽉 채우기 (푸터 밀어내기용) */
.content {
  flex: 1;
  padding: 30px;
  width: 100%;
  max-width: 1600px; /* 너무 넓어지는 것 방지 */
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 20px;
  min-width: 0; /* ✅ 테이블 overflow가 body를 밀지 않게 */
}

/* Footer: 항상 바닥에 고정 */
.footer {
  margin-top: auto; /* 핵심: 위쪽 공간을 모두 차지하여 바닥으로 이동 */
  background: #ffffff;
  border-top: 1px solid var(--border);
  padding: 15px 30px;
  font-size: 12px;
  color: var(--text-muted);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* =========================================
   3. Sidebar Components
   ========================================= */
.sidebar__brand {
  padding: 15px;
  background: var(--accent);
  border-radius: var(--radius);
  color: #ffffff;
  text-align: center;
}

.brand__title { font-size: 18px; font-weight: 800; letter-spacing: -0.5px; }
.brand__subtitle { font-size: 11px; opacity: 0.8; margin-top: 4px; }

.sidebar__nav { display: flex; flex-direction: column; gap: 5px; }

.nav__item {
  display: block;
  padding: 12px 15px;
  border-radius: 6px;
  color: var(--text-muted);
  font-weight: 500;
  font-size: 14px;
}

.nav__item:hover {
  background: var(--panel-secondary);
  color: var(--text-main);
}

.nav__item.is-active {
  background: var(--accent-soft);
  color: var(--accent);
  font-weight: bold;
}

/* =========================================
   4. Header & Panels
   ========================================= */
.header {
  height: var(--header-height);
  background: #ffffff;
  border-bottom: 1px solid var(--border);
  padding: 0 30px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header__title { font-size: 18px; font-weight: bold; margin: 0; }
.header__user { font-size: 13px; color: var(--text-muted); }

/* Panel (White Box) */
.panel {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
  min-width: 0; /* ✅ grid/flex 안에서 overflow 새는거 방지 */
}

.panel__head {
  padding: 15px 20px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #ffffff;
}

.panel__title {
  margin: 0;
  font-size: 16px;
  font-weight: bold;
  border-left: 4px solid var(--accent); /* 포인트 라인 */
  padding-left: 12px;
}

.panel__body { padding: 25px; min-width: 0; } /* ✅ */

/* =========================================
   5. UI Components (Cards, Buttons, Tables)
   ========================================= */

/* Grid & Cards */
.grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 20px;
}

.card {
  background: var(--panel-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  text-align: center;
}

.card__label { color: var(--text-muted); font-size: 13px; margin-bottom: 8px; }
.card__value { font-size: 28px; font-weight: 800; color: var(--accent); }

/* Chips */
.chip {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  background: var(--panel-secondary);
  color: var(--text-muted);
}

/* Inputs & Selects */
.input, .select {
  height: 38px;
  padding: 0 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
  font-size: 13px;
  outline: none;
  transition: border-color 0.2s;
}
.input:focus, .select:focus { border-color: var(--accent); }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 38px;
  padding: 0 16px;
  border-radius: 4px;
  font-size: 13px;
  font-weight: bold;
  cursor: pointer;
  border: 1px solid #ccc;
  background: #fff;
  color: var(--text-main);
  transition: all 0.2s;
}
.btn:hover { background: #f0f0f0; }

.btn--primary {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}
.btn--primary:hover { background: var(--accent-hover); }

.btn.is-disabled {
  opacity: 0.5;
  pointer-events: none;
  background: #f4f4f4;
}

/* Filter Bar */
.filterbar {
  background: var(--panel-secondary);
  padding: 20px;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  margin-bottom: 20px;
}
.filterbar__row {
  display: flex;
  gap: 15px;
  align-items: flex-end;
  flex-wrap: wrap;
}
.field { display: flex; flex-direction: column; gap: 6px; }
.label { font-size: 12px; font-weight: 600; color: var(--text-muted); }

/* =========================================
   Tables (Theme-aligned + 깨짐 방지)
   ========================================= */
.table-wrap {
  width: 100%;
  overflow-x: auto;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: #fff;
  min-width: 0; /* ✅ */
}

.table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  min-width: 800px; /* 유지: 컬럼 많을 때 스크롤 유도 */
}

/* Header */
.table th {
  background: #ffffff;
  color: var(--text-main);
  font-weight: 900;
  padding: 12px 14px;
  text-align: left;
  font-size: 12px;
  letter-spacing: -0.2px;
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}

/* Subtle header tone (accent-soft 라인) */
.table thead th {
  box-shadow: inset 0 -1px 0 var(--border), inset 0 3px 0 var(--accent-soft);
}

/* Body */
.table td {
  padding: 12px 14px;
  border-bottom: 1px solid var(--border);
  color: var(--text-main);
  vertical-align: middle;
  background: #fff;
}

/* last row border cleanup */
.table tbody tr:last-child td { border-bottom: 0; }

/* zebra */
.table tbody tr:nth-child(even) td { background: var(--panel-secondary); }

/* hover (전체 UI 톤 통일) */
.table tbody tr:hover td { 
  background: #fcfcff;   /* 이전 사용하던 아주 옅은 톤 */
}

.table tr.is-selected td {
  background: #fcfcff;
}


/* Empty cell */
.td-muted {
  color: var(--text-muted);
  text-align: center;
  padding: 36px !important;
  background: #fff;
}

/* Pagination */
.pager {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 15px;
  border-top: 1px solid var(--border);
}

/* Empty State */
.empty {
  padding: 50px;
  text-align: center;
  background: #fafafa;
  border: 1px dashed #ccc;
  border-radius: var(--radius);
  color: var(--text-muted);
}

/* =========================================
   6. Responsive
   ========================================= */
@media (max-width: 960px) {
  .app { grid-template-columns: 1fr; } /* 사이드바 상단 이동 */
  .sidebar {
    height: auto;
    position: relative;
    border-right: none;
    border-bottom: 1px solid var(--border);
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    overflow-y: visible;
  }
  .sidebar__nav { flex-direction: row; overflow-x: auto; }
  .grid { grid-template-columns: 1fr; }
  .filterbar__row { flex-direction: column; align-items: stretch; }
  .field { width: 100%; }
  .input, .select { width: 100% !important; }
}

/* =========================================
   7. Utilities (Common)
   ========================================= */
.panel__meta { display: flex; gap: 8px; align-items: center; }

.ta-right { text-align: right !important; }
.ta-center { text-align: center !important; }

.break-all { word-break: break-all; }
.nowrap { white-space: nowrap; }

.btn--ghost {
  background: #fff;
  border: 1px solid var(--border);
  color: var(--text-main);
}
.btn--ghost:hover { background: var(--panel-secondary); }

.btn--danger {
  background: var(--danger);
  border-color: var(--danger);
  color: #fff;
}
.btn--danger:hover { filter: brightness(0.95); }

.btn--quiet {
  background: transparent;
  border-color: transparent;
  color: var(--text-muted);
}
.btn--quiet:hover { background: var(--panel-secondary); color: var(--text-main); }

.chip--success { background: var(--success-bg); color: var(--success); }
.chip--danger  { background: var(--danger-bg);  color: var(--danger); }
.chip--neutral { background: var(--panel-secondary); color: var(--text-muted); }

/* make empty tables consistent */
.table .td-muted { text-align: center; }

/* Table column width helpers (운영에서 컬럼폭 고정용) */
.col-xs { width: 80px; }
.col-sm { width: 120px; }
.col-md { width: 180px; }
.col-lg { width: 260px; }

/* =========================================
   8. Admin Ops Add-ons (Status/Alerts/Modal/Table UX)
   ========================================= */

/* ---- 8-1) Status / Channel badges (NO inline-style hacks) ---- */
.chip--status { font-weight: 800; letter-spacing: -0.2px; }
.chip--channel { font-weight: 800; }

/* Delivery status */
.chip--started   { background: #e3f2fd; color: #1565c0; } /* blue */
.chip--completed { background: var(--success-bg); color: var(--success); }
.chip--failed    { background: var(--danger-bg);  color: var(--danger); }
.chip--pending   { background: #fff8e1; color: #f57c00; } /* amber */
.chip--canceled  { background: #eceff1; color: #455a64; } /* grey */

/* Channels */
.chip--email { background: #e8eaf6; color: #283593; } /* indigo */
.chip--sms   { background: #e0f7fa; color: #006064; } /* cyan */
.chip--push  { background: #f3e5f5; color: #6a1b9a; } /* purple */

/* ---- 8-2) Alerts / Callouts (운영 화면 필수) ---- */
.alert {
  border: 1px solid var(--border);
  border-left: 5px solid #999;
  background: #fff;
  border-radius: var(--radius);
  padding: 14px 16px;
  display: flex;
  align-items: flex-start;
  gap: 10px;
}
.alert__title { font-weight: 800; margin: 0 0 4px 0; }
.alert__desc  { margin: 0; color: var(--text-muted); font-size: 13px; }

.alert--info    { border-left-color: #1565c0; background: #f3f8ff; }
.alert--warn    { border-left-color: #f57c00; background: #fff8e1; }
.alert--danger  { border-left-color: var(--danger); background: var(--danger-bg); }
.alert--success { border-left-color: var(--success); background: var(--success-bg); }

.alert__actions { margin-left: auto; display: inline-flex; gap: 8px; }

/* ---- 8-3) Inline help / hint text ---- */
.hint { color: var(--text-muted); font-size: 12px; }
.hint strong { color: var(--text-main); }

/* ---- 8-4) Code / log preview ---- */
.codeblock {
  background: #0b1020;
  color: #e6e6e6;
  border-radius: var(--radius);
  padding: 14px 16px;
  overflow: auto;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  line-height: 1.45;
  border: 1px solid rgba(255,255,255,0.08);
}
.codeblock--light {
  background: #fafafa;
  color: #222;
  border: 1px solid var(--border);
}

/* ---- 8-5) Modal (재발송/상세보기) ---- */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999;
  padding: 20px;
}
.modal-backdrop.is-open { display: flex; }

.modal {
  width: min(880px, 100%);
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.25);
  border: 1px solid rgba(0,0,0,0.08);
  overflow: hidden;
}
.modal__head {
  padding: 14px 18px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.modal__title { margin: 0; font-size: 16px; font-weight: 900; }
.modal__body  { padding: 18px; }
.modal__foot  {
  padding: 14px 18px;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

/* Close button */
.btn-icon {
  width: 34px; height: 34px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: #fff;
  cursor: pointer;
}
.btn-icon:hover { background: var(--panel-secondary); }

/* ---- 8-6) Table UX improvements (테마에 맞춰 최소만) ---- */
.table td .actions { display: inline-flex; gap: 8px; align-items: center; }
.table td .link {
  color: var(--accent);
  font-weight: 900;
}
.table td .link:hover { color: var(--accent-hover); text-decoration: underline; }

/* sticky header option */
.table-wrap.is-sticky {
  max-height: 520px;
  overflow: auto;
}
.table-wrap.is-sticky .table th {
  position: sticky;
  top: 0;
  z-index: 2;
}

/* row select checkbox alignment */
.table .td-check {
  width: 44px;
  text-align: center;
}
.checkbox {
  width: 16px; height: 16px;
  accent-color: var(--accent);
}

/* ---- 8-7) Tabs (sending/batch detail 전환용) ---- */
.tabs {
  display: flex;
  gap: 8px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 12px;
}
.tab {
  padding: 10px 12px;
  border-radius: 8px 8px 0 0;
  background: transparent;
  border: 1px solid transparent;
  color: var(--text-muted);
  font-weight: 800;
  cursor: pointer;
}
.tab.is-active {
  background: #fff;
  border-color: var(--border);
  border-bottom-color: #fff;
  color: var(--text-main);
}
.tab:hover { color: var(--text-main); }

/* ---- 8-8) Small KPI row (mini cards) ---- */
.kpi {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 12px;
}
.kpi__item {
  border: 1px solid var(--border);
  background: #fff;
  border-radius: var(--radius);
  padding: 14px 14px;
}
.kpi__label { color: var(--text-muted); font-size: 12px; margin-bottom: 6px; }
.kpi__value { font-size: 18px; font-weight: 900; }
.kpi__value--accent { color: var(--accent); }
.kpi__value--danger { color: var(--danger); }
.kpi__value--success { color: var(--success); }

/* ---- 8-9) Page head helper (제목 + 필터상태) ---- */
.pagehead {
  display:flex;
  justify-content:space-between;
  align-items:flex-end;
  gap:12px;
}
.pagehead__sub { color: var(--text-muted); font-size: 12px; }
.pagehead__right {
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
}

/* ---- 8-10) Layout helper: split panels (상단/하단 2열) ---- */
/* ✅ 깨짐 방지 핵심: minmax(0,1fr) */
.split {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
  gap: 20px;
}
.split > * { min-width: 0; } /* ✅ */

@media (max-width: 1200px) {
  .split { grid-template-columns: 1fr; }
  .kpi { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 640px) {
  .kpi { grid-template-columns: 1fr; }
}

/* =========================================
   9. Admin Template Fixups (HTML inline 제거용)
   ========================================= */

/* Sidebar footer */
.sidebar__footer {
  margin-top: auto;
  font-size: 12px;
  color: #999;
}

/* Header inner layout */
.header__row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  flex-wrap: wrap;
}
.header__filter {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
}

/* Disabled nav item */
.nav__item.is-disabled {
  opacity: .45;
  cursor: not-allowed;
  pointer-events: none;
}

/* Small buttons */
.btn--small {
  height: 32px;
  padding: 0 12px;
  font-size: 12px;
  border-radius: 4px;
}

/* Pager helpers */
.pager__left { color: var(--text-muted); font-size: 13px; }
.pager__right { display: inline-flex; gap: 6px; }

/* Empty state titles/desc */
.empty__title { font-weight: 800; margin: 0 0 6px 0; }
.empty__desc { margin: 0; font-size: 13px; color: var(--text-muted); line-height: 1.6; }

/* Generic spacing helpers */
.mt-8 { margin-top: 8px !important; }
.mt-12 { margin-top: 12px !important; }
.mt-14 { margin-top: 14px !important; }
.mt-20 { margin-top: 20px !important; }
.mb-14 { margin-bottom: 14px !important; }

/* Width helpers (inline width 제거용) */
.w-90  { width: 90px !important; }
.w-120 { width: 120px !important; }
.w-140 { width: 140px !important; }
.w-160 { width: 160px !important; }
.w-180 { width: 180px !important; }
.w-220 { width: 220px !important; }
.w-240 { width: 240px !important; }

/* Clickable cards */
.card.is-clickable { cursor: pointer; }
.card.is-clickable:hover { filter: brightness(0.99); }

/* KPI grid: 6 columns */
.grid--6 { grid-template-columns: repeat(6, minmax(0, 1fr)); }
@media (max-width: 1400px) { .grid--6 { grid-template-columns: repeat(3, minmax(0, 1fr)); } }
@media (max-width: 640px)  { .grid--6 { grid-template-columns: 1fr; } }

/* Sections header row */
.section-head {
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
  margin: 0 0 10px 0;
}
.section-title {
  margin: 0;
  font-size: 15px;
  color: var(--text-main);
  font-weight: 800;
}

/* Table selection highlight */

/* Bills list helpers */
.bills-table td { vertical-align: top; }
.bill-title { font-weight: 800; color: var(--text-main); }
.bill-meta { font-size: 12px; color: var(--text-muted); }
.dot { margin: 0 6px; color: #aaa; }
.amount-strong { font-weight: 900; }
.amount-sub { font-size: 12px; color: #777; }
.stack { display:flex; flex-direction:column; gap:4px; }
.stack--end { align-items:flex-end; }
.actions-vert { display:flex; flex-direction:column; gap:6px; }

/* Side detail panel */
.panel--side { border: 1px solid var(--border); }
.kv {
  display:grid;
  grid-template-columns: 120px 1fr;
  gap: 6px 10px;
  font-size: 13px;
}
.kv__key { color: var(--text-muted); }
.kv__val--strong { font-weight: 900; }

/* Cards for table blocks */
.card--table { text-align: left; }
.card--ops { text-align: left; }
.row { display:flex; gap:14px; flex-wrap:wrap; align-items:flex-end; }
.row--top { align-items:flex-start; }

/* Preview helpers */
.preview-wrap { max-width: 980px; margin: 0 auto; }
.preview-phone { max-width: 520px; margin: 0 auto; }

/* Split layout: narrow right panel */
/* ✅ 깨짐 방지: 왼쪽은 반드시 minmax(0,1fr) */
.split--narrow-right { grid-template-columns: minmax(0, 1fr) 420px; }
@media (max-width: 1100px) { .split--narrow-right { grid-template-columns: 1fr; } }

.user-name { font-weight: 800; color: var(--text-main); }

/* Bills list panel */
.panel--list { border: 1px solid var(--border); }

/* ===== Dashboard add-ons (v2.1) ===== */
.metric { margin-top: 12px; border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
.metric__row { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid var(--border); }
.metric__row:last-child { border-bottom: 0; }
.metric__label { color: var(--text-muted); font-size: 13px; }
.metric__value { font-size: 20px; font-weight: 800; letter-spacing: -0.02em; }
.metric__value--danger { color: var(--danger); }
.truncate { max-width: 420px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

@media (max-width: 960px) {
  .split { grid-template-columns: 1fr; }
  .truncate { max-width: 240px; }
}

/* =========================================
   10. Refactored Layout Utilities
   ========================================= */

/* Flexbox Layout Helpers (인라인 스타일 제거용) */
.flex-row {
  display: flex;
  gap: 12px;
  align-items: stretch;
  flex-wrap: wrap;
}

/* Split Layout Variants */
.split--auto-fixed {
  grid-template-columns: minmax(0, 1fr) 420px; /* ✅ 왼쪽 줄어들 수 있게 */
}
@media (max-width: 1100px) {
  .split--auto-fixed { grid-template-columns: 1fr; }
}

/* Panel Margins - 일관된 여백 관리 */
.panel + .panel { margin-top: 20px; } /* 패널이 연속될 때 자동 여백 */
.mt-0 { margin-top: 0 !important; }

/* Filterbar Label Consistency */
.filterbar .label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  margin-bottom: 6px;
}
